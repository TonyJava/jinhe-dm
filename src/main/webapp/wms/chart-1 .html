<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>统计各快递公司揽收量</title>

	<script type="text/javascript" src="../framework/core.js"></script>
	<script type="text/javascript" src="../framework/ajax.js"></script>
	<script type="text/javascript" src="../ichartjs/ichart.1.1.min.js"></script>

	<script type="text/javascript">

	var data;
	
/* */	
	 data = [
			{name : '分配订单数',value : 3000, color:'#3883bd'},
			{name : '拣货订单数',value : 2600, color:'#3F5C71'},
			{name : '验货订单数',value : 1000, color:'#a6bfd2'},
			{name : '发运订单数',value : 3400, color:'#d6ffd2'}
		];
	show();
		

/*
	var url = Query.get("service"); // "wms/kanban/2/104221"
	window.setInterval(function() {
		Ajax({
			url : url,
			method : "GET",
			type : "json",
			ondata : function() { 
				data = eval(this.getResponseText());
				
				show();
			}
		});	  
	  }, 1000*30);
*/	

	function show() {
		$(function(){   
			var chart = new iChart.Pie2D({
				render : 'canvasDiv',
				title:{
					text:'仓库当天实时作业进度情况',
					color:'#e0e5e8',
					height:40,
					border:{
						enable:true,
						width:[0,0,2,0],
						color:'#343b3e'
					}
				},
				padding:'2 10',
				width : 1000,
				height : 700,
				data:data,
				shadow:true,
				shadow_color:'#15353a',
				shadow_blur:8,
				background_color : '#3b4346',
				gradient:true, // 开启渐变
				color_factor:0.28,
				gradient_mode:'RadialGradientOutIn',
				showpercent:true,
				decimalsnum:2,
				legend:{
					enable:true,
					padding:30,
					color:'#e0e5e8',
					border:{
						width:[0,0,0,2],
						color:'#343b3e'
					},
					background_color : null,
				},
				sub_option:{
					border:{
						enable:false
					},
					label : {
						background_color:'#fefefe',
						sign:false, // 设置禁用label的小图标
						line_height:10,
						padding:4,
						border:{
							enable:true,
							radius : 4, // 圆角设置
							color:'#e0e5e8'
						},
						fontsize:11,
						fontweight:600,
						color : '#444444'
					},
					listeners:{
						parseText:function(d, t){
							return d.get('value');
						}
					}
				},
				border:{
					width:[0,20,0,20],
					color:'#1e2223'
				}
			});
			
			chart.bound(0);
			chart.bound(2);
		});
	}
	</script>
</head>

<body>
	<div id='canvasDiv'></div>
</body>
</html>