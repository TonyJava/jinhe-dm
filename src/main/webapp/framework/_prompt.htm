<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!-- 公共脚本 开始 -->
<link href="css/css.css" rel="stylesheet" type="text/css">
<link href="css/dialog.css" rel="stylesheet" type="text/css">
<script language="javascript" src="core.js"></script>
<script language="javascript" src="framework.js"></script>
<!-- 公共脚本 结束 -->

<style>
  #infoBox{
      color:#666666;
      line-height:18px;
      word-break:break-all;
      width:100%;
      height:15px;
      overflow:hidden;
      text-overflow:ellipsis;
  }

</style>
<script language="javascript">
<!--   
	var params;

    window.onload = function() {
        params = window.dialogArguments;
        if(params == null) {
            return;
        }

		var inputType = "text";
        if(true == params.protect) {
			inputType = "password";
        }

        var infoBox = $$("infoBox");
        var textBox = $$("textBox");
        infoBox.innerText = params.info.replace(/[\r\n]/g, "");
		textBox.innerHTML = "<input type=\" " + inputType +  "\" id=\"txtfield\" class=\"txtfield\" style=\"width:100%\"/>";        

		$$("bt_cancel").focus();

        setTimeout(function() {
            $$("txtfield").value = params.defaultValue;
        }, 0);
    }

    function ok() {
        var txtfield = $$("txtfield");
        var value = txtfield.value;

		var maxLength = params.maxBytes;
        if(false == isNaN(maxLength) && value.getBytes() > maxLength) {
            alert("不能超过最大长度" + maxLength + "字节");
            return;
        }
        window.returnValue = value;
        window.close();
    }

    function cancel() {
        window.close();
    }

    Event.attachEvent(document, "keydown", function(eventObj) {
        if(27 == eventObj.keyCode) {
            window.close();
        }
    });

//-->
</script>
</head>

<body>
	<div class="mainBox">
	  <table class="full" border="0" cellspacing="0" cellpadding="0">
		<tr>
		  <td valign=top>
			<div id="infoBox"></div>
		  </td>
		</tr>
		<tr>
		  <td height="24" id="textBox"></td>
		</tr>
		<tr>
		  <td align="right" height="30">
			<input type="button" id="bt_cancel" value="取 消" class="btWeak" onclick="cancel()"> 
			<input type="button" id="bt_ok" value="确 定" class="btStrong" onclick="ok()">
		  </td>
		</tr>
	  </table>
	</div>
</body>

</html>
