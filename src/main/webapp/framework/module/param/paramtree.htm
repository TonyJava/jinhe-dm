<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML xmlns:ToolBar xmlns:WorkSpace xmlns:Tree xmlns:Grid xmlns:XForm>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>参数列表</title>

<link href="../../css/css.css" rel="stylesheet" type="text/css"></link>
<link href="../../css/dialog.css" rel="stylesheet" type="text/css"></link>
<link href="../../tree/tree.css" rel="stylesheet" type="text/css"></link>

<script language="javascript" src="../../core.js"></script>
<script language="javascript" src="../../ajax.js"></script>
<script language="javascript" src="../../framework.js"></script>
<script language="javascript" src="../../tree/tree.js"></script>

<SCRIPT LANGUAGE="JavaScript">
<!--

	URL_CORE = "../../";
	
	URL_INIT = "/" + CONTEXTPATH + "param/list/";
	
	if(IS_TEST) {
		URL_INIT = "data/paramtree_init.xml?";
	}

	var params = window.dialogArguments.params;

	function init() {		
		Ajax({
			url : URL_INIT  + params.id,
			onresult : function() { 
				var tree = $T("tree", this.getNodeValue("ParamTree"));		
				$$("tree").onTreeNodeDoubleClick = function(eventObj) {
					getTargetParent();
				}
			}
		});
	}
	
	function getTargetParent() {
		var treeNode = $T("tree").getActiveTreeNode();
		if( treeNode ) {
			var returnValue = {};
			var attributes = treeNode.node.attributes;
			for(var i=0; i < attributes.length; i++) {
				var name  = attributes[i].nodeName;
				var value = attributes[i].nodeValue;
				returnValue[name] = value;
			}
			window.returnValue = returnValue;
			window.close();
		}
	}

    window.onload = init;
//-->
</SCRIPT>
</head>

<body>
  <table class="full" border="0" cellspacing="0" cellpadding="0">
    <tr valign="top">
      <td>
		<Tree:Box id="tree" treeType="menu" baseurl="../../tree/"><div class="loading"></div></Tree:Box>
      </td>
    </tr>
    <tr>
      <td class="t" height="30" align="right">
		<input type="button" value="确定" class="btStrong" onclick="getTargetParent()"/>
        <input type="button" value="关闭" class="btWeak" onclick="window.close()"/> 
      </td>
    </tr>
  </table>
</body>
</html>
