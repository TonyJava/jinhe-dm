<HTML xmlns:Grid>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>它山石--test Grid</title>

<link href="grid.css" rel="stylesheet" type="text/css">
<link href="../balloon/balloon.css" rel="stylesheet" type="text/css">
<link href="../css/css.css" rel="stylesheet" type="text/css">

<script language="javascript" src="../core.js"></script>
<script language="javascript" src="../ajax.js"></script>
<script language="javascript" src="../framework.js"></script>
<script language="javascript" src="../balloon/balloon.js"></script>

<script language="javascript" src="grid.js"></script>

<SCRIPT LANGUAGE="JavaScript">
<!--
 
URL_CORE = "../";

    function init() {
				Ajax({
					url : "test/data.xml",
					headers : null,
					contents : null, 
					onresult : function() {
						var gridData = this.getNodeValue("SourceList");
						var grid = $G("grid", gridData);       

						var gridPage = this.getNodeValue("PageInfo");
						createGridToolBar(gridPage);

						$$("grid").onScrollToBottom = function () {
							grid.load(gridData, true);
						}
						$$("grid").onRightClickRow = function () {
						    var rowIndex = $$("grid").selectRowIndex; 
							var row = $G("grid").getRowByIndex(rowIndex);
							$G("grid").modifyRow(row, "loginName", "天地玄黄");

							alert("show right menu!");

							// $G("grid").deleteRow(row);
						}
					}
				});
    }

    function createGridToolBar(gridPage) {
        var toolbarObj = $$("gridToolBar");
				initGridToolBar(toolbarObj, gridPage, function(page) {
						Ajax({
							url : "test/data.xml",
							headers : null,
							contents : null, 
							onresult : function() {
								var gridData = this.getNodeValue("SourceList");
								var grid = $G("grid", gridData);       

								var gridPage = this.getNodeValue("PageInfo");
								createGridToolBar(gridPage);
							}
						});
				});
    }
	
 
	window.onload = init;
   
//-->
</SCRIPT>
</head>

<body>

<table class="full border" border="0" cellspacing="0" cellpadding="0" >
  <tr>
	<td id="gridTitle">
	  <span class="icon"></span>用户列表<span class="buttonBox" id="gridToolBar"></span>
	</td>
  </tr>
  <tr>
	<td>
	  <Grid:Box id="grid" baseurl="" height="330" width="1000">
			<div class="loading"/>
		</Grid:Box>
	</td>
  </tr>
</table>
										
 
</body>
</html>